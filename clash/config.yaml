p: &p { type: http, interval: 86400, health-check: {
        enable: true,
        #url: https://www.gstatic.com/generate_204,
        url: https://cp.cloudflare.com/generate_204,
        interval: 600,
      } }

use: &use
  type: select
  use:
    - proxy
  exclude-filter: "å‰©ä½™æµé‡|è¿‡æœŸæ—¶é—´"

# urlé‡Œå¡«å†™è‡ªå·±çš„è®¢é˜…,åç§°ä¸èƒ½é‡å¤,path(æ–‡ä»¶ä½ç½®)ä¸èƒ½é‡å¤
proxy-providers:
  proxy:
    <<: *p
    url: ""
    path: ./proxy.yaml

mixed-port: 7890
allow-lan: true
bind-address: "*"
mode: rule
log-level: warning
ipv6: true
unified-delay: true
tcp-concurrent: true
keep-alive-interval: 600

external-controller: 0.0.0.0:9090
#external-ui: /var/tmp/clash-meta-webui
external-ui: webui
#external-ui-name: xd
external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip" #ä» GitHub Pages åˆ†æ”¯è·å–
secret: ""

profile:
  store-selected: true
  store-fake-ip: true

sniffer:
  enable: false
  sniff:
    TLS:
      ports: [443, 8443]
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
  force-domain:
    - +.v2ex.com
    - +.steamcommunity.com
    - +.steampowered.com
    #- +.live.com

# dns:
#   enable: true
#   ipv6: true
#   default-nameserver: [223.5.5.5, 119.29.29.29]
#   enhanced-mode: fake-ip
#   fake-ip-range: 198.18.0.1/16
#   use-hosts: true
#   nameserver: ["https://doh.pub/dns-query", "https://dns.alidns.com/dns-query"]
#   fallback:
#     [
#       "https://doh.dns.sb/dns-query",
#       "https://dns.cloudflare.com/dns-query",
#       "https://dns.twnic.tw/dns-query",
#       "tls://8.8.4.4:853",
#     ]
#   fallback-filter: { geoip: true, ipcidr: [240.0.0.0/4, 0.0.0.0/32] }
dns:
  enable: true
  listen: "0.0.0.0:53"
  ipv6: true
  default-nameserver:
    - 119.29.29.29
    - 223.5.5.5
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  use-hosts: true
  fake-ip-filter:
    - "*.lan"
    - localhost.ptlogin2.qq.com
    - "*.msftconnecttest.com"
    - "*.msftncsi.com"
    - "*.srv.nintendo.net"
    - "*.stun.playstation.net"
    - "xbox.*.microsoft.com"
    - "*.xboxlive.com"
    - "*.logon.battlenet.com.cn"
    - "*.logon.battle.net"
    - stun.l.google.com
  nameserver:
    - 119.29.29.29
    - 223.5.5.5

proxies:
  - name: WARP
    type: direct

proxy-groups:
  - {
      name: ä»£ç†æ¨¡å¼,
      type: select,
      proxies: [èŠ‚ç‚¹é€‰æ‹©, è‡ªåŠ¨é€‰æ‹©, WARP, DIRECT],
    }

  - { name: èŠ‚ç‚¹é€‰æ‹©, <<: *use }

  - {
      name: è‡ªåŠ¨é€‰æ‹©,
      type: url-test,
      <<: *use,
      filter: "é¦™æ¸¯|æ—¥æœ¬",
      exclude-filter: "2å€ç‡|2.5å€ç‡|3å€ç‡",
      url: "https://cp.cloudflare.com/generate_204",
      interval: 300,
      tolerance: 300,
      lazy: true,
    }

  - { name: å…¶ä»–æµé‡, type: select, proxies: [ä»£ç†æ¨¡å¼, DIRECT] }

  - { name: EH, <<: *use, proxies: [èŠ‚ç‚¹é€‰æ‹©, DIRECT] }

  - { name: JP, <<: *use, filter: "æ—¥æœ¬", proxies: [DIRECT] }

  - { name: Telegram, type: select, proxies: [ä»£ç†æ¨¡å¼, WARP, DIRECT] }

  # - { name: RELAY, type: relay, proxies: [WARP, èŠ‚ç‚¹é€‰æ‹©] }

  - { name: å¾®è½¯æœåŠ¡, type: select, proxies: [DIRECT, ä»£ç†æ¨¡å¼] }

  - { name: å›½é™…æµåª’ä½“, type: select, proxies: [ä»£ç†æ¨¡å¼, DIRECT] }

  - { name: å¤§é™†æµåª’ä½“å›½é™…ç‰ˆ, type: select, proxies: [DIRECT, ä»£ç†æ¨¡å¼] }

  - { name: Steam, type: select, proxies: [DIRECT, ä»£ç†æ¨¡å¼] }

  - { name: å›½é™…ç½‘ç«™, type: select, proxies: [ä»£ç†æ¨¡å¼, DIRECT] }

  - { name: å¤§é™†æµé‡, type: select, proxies: [DIRECT, ä»£ç†æ¨¡å¼] }

  - { name: å¤§é™†æµåª’ä½“, type: select, proxies: [DIRECT, å¤§é™†æµé‡] }

  - { name: å¤§é™†ç½‘ç«™, type: select, proxies: [DIRECT, å¤§é™†æµé‡] }

  - { name: ç‰¹æ®ŠèŠ‚ç‚¹, <<: *use }

rules:
  # Unbreak
  - RULE-SET,Unbreak,DIRECT

  # User definied rules
  #- DOMAIN-SUFFIX,chaotic.cx,DIRECT
  #- DOMAIN-SUFFIX,mirror.heigou.pe.kr,DIRECT
  #- PROCESS-NAME,qbittorrent,DIRECT
  - DOMAIN-SUFFIX,bing.com,ç‰¹æ®ŠèŠ‚ç‚¹
  - DOMAIN-SUFFIX,openai.com,ç‰¹æ®ŠèŠ‚ç‚¹
  #- DOMAIN-SUFFIX,cm.steampowered.com,DIRECT
  #- DOMAIN-SUFFIX,steamserver.net,DIRECT
  - DOMAIN-SUFFIX,steamcommunity.com,DIRECT
  - DOMAIN-SUFFIX,cangku.moe,ä»£ç†æ¨¡å¼
  - DOMAIN-SUFFIX,dodi-repacks.site,ä»£ç†æ¨¡å¼
  #- DOMAIN-KEYWORD,google.com,æœºåœºèŠ‚ç‚¹
  #- DOMAIN-SUFFIX,android.googlesource.com,WARP
  - DOMAIN-SUFFIX,ghproxy.com,DIRECT

  # ãƒ–ãƒ«ãƒ¼ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ï¼ˆãƒ–ãƒ«ã‚¢ã‚«ï¼‰ï¼ŒBlue Archive
  - DOMAIN-SUFFIX,prod-game.bluearchiveyostar.com,JP
  - DOMAIN-SUFFIX,prod-gateway.bluearchiveyostar.com,JP

  - DOMAIN-SUFFIX,yostar-serverinfo.bluearchiveyostar.com,JP
  - DOMAIN-SUFFIX,prod-xigncode.bluearchiveyostar.com,JP
  - DOMAIN-SUFFIX,prod-noticeindex.bluearchiveyostar.com,JP
  # download?
  - DOMAIN-SUFFIX,prod-clientpatch.bluearchiveyostar.com,DIRECT
  #- DOMAIN-SUFFIX,prod-notice.bluearchiveyostar.com,JP
  #- DOMAIN-SUFFIX,prod-voice.bluearchiveyostar.com,JP
  - DOMAIN-SUFFIX,ba-jp-sdk.bluearchive.jp,JP
  - DOMAIN,yostar-oversea-client-logging.ap-southeast-1.log.aliyuncs.com,JP
  - DOMAIN,yostar-oversea-netsdk-logging.ap-southeast-1.log.aliyuncs.com,JP

  - DOMAIN-SUFFIX,spotify.com,JP

  # Global Area Network
  #
  # Telegram
  - DOMAIN-SUFFIX,t.me,Telegram
  - DOMAIN-SUFFIX,tdesktop.com,Telegram
  - DOMAIN-SUFFIX,telegra.ph,Telegram
  - DOMAIN-SUFFIX,telegram.me,Telegram
  - DOMAIN-SUFFIX,telegram.org,Telegram
  - DOMAIN-SUFFIX,telesco.pe,Telegram
  - IP-CIDR,91.108.0.0/16,Telegram,no-resolve
  - IP-CIDR,109.239.140.0/24,Telegram,no-resolve
  - IP-CIDR,149.154.160.0/20,Telegram,no-resolve
  - IP-CIDR6,2001:67c:4e8::/48,Telegram,no-resolve
  - IP-CIDR6,2001:b28:f23d::/48,Telegram,no-resolve
  - IP-CIDR6,2001:b28:f23f::/48,Telegram,no-resolve

  # EH
  - DOMAIN-SUFFIX,e-hentai.org,EH
  - DOMAIN-SUFFIX,exhentai.org,EH

  # å¾®è½¯æœåŠ¡
  - DOMAIN-KEYWORD,1drv,å¾®è½¯æœåŠ¡
  - DOMAIN-KEYWORD,microsoft,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,aadrm.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,acompli.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,acompli.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,aka.ms,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,akadns.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,aspnetcdn.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,assets-yammer.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,azure.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,azure.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,azureedge.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,azurerms.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,bing.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,cloudapp.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,cloudappsecurity.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,edgesuite.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,gfx.ms,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,hotmail.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,live.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,live.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,lync.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,msappproxy.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,msauth.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,msauthimages.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,msecnd.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,msedge.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,msft.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,msftauth.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,msftauthimages.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,msftidentity.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,msidentity.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,msn.cn,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,msn.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,msocdn.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,msocsp.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,mstea.ms,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,o365weve.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,oaspapps.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,office.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,office.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,office365.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,officeppe.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,omniroot.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,onedrive.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,onenote.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,onenote.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,onestore.ms,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,outlook.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,outlookmobile.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,phonefactor.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,public-trust.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,sfbassets.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,sfx.ms,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,sharepoint.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,sharepointonline.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,skype.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,skypeassets.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,skypeforbusiness.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,staffhub.ms,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,svc.ms,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,sway-cdn.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,sway-extensions.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,sway.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,trafficmanager.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,uservoice.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,virtualearth.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,visualstudio.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,windows-ppe.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,windows.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,windows.net,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,windowsazure.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,windowsupdate.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,wunderlist.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,yammer.com,å¾®è½¯æœåŠ¡
  - DOMAIN-SUFFIX,yammerusercontent.com,å¾®è½¯æœåŠ¡

  # (Streaming Media)
  - RULE-SET,Streaming,å›½é™…æµåª’ä½“

  # (StreamingSE)
  - RULE-SET,StreamingSE,å¤§é™†æµåª’ä½“å›½é™…ç‰ˆ

  # (Steam)
  - RULE-SET,Steam,Steam

  # (DNS Cache Pollution) / (IP Blackhole) / (Region-Restricted Access Denied) / (Network Jitter)
  - RULE-SET,Global,å›½é™…ç½‘ç«™

  # (StreamingCN)
  - RULE-SET,StreamingCN,å¤§é™†æµåª’ä½“

  # China Area Network
  - RULE-SET,China,å¤§é™†ç½‘ç«™

  # Local Area Network
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,100.64.0.0/10,DIRECT
  - IP-CIDR,224.0.0.0/4,DIRECT
  - IP-CIDR,fe80::/10,DIRECT

  # ï¼ˆå¯é€‰ï¼‰ä½¿ç”¨æ¥è‡ª ipipdotnet çš„ ChinaIP ä»¥è§£å†³æ•°æ®ä¸å‡†ç¡®çš„é—®é¢˜ï¼Œä½¿ç”¨ ChinaIP.yaml æ—¶å¯ç¦ç”¨ä¸‹åˆ—ç›´è‡³ï¼ˆåŒ…æ‹¬ï¼‰ã€ŒGEOIP,CNã€è§„åˆ™
  - RULE-SET,ChinaIP,å¤§é™†æµé‡
  # Tencent
  # - IP-CIDR,119.28.28.28/32,ğŸ  å¤§é™†æµé‡
  # - IP-CIDR,182.254.116.0/24,ğŸ  å¤§é™†æµé‡
  # GeoIP China
  # - GEOIP,CN,ğŸ  å¤§é™†æµé‡

  - MATCH,å…¶ä»–æµé‡

rule-providers:
  # name: # Provider åç§°
  #   type: http # http æˆ– file
  #   behavior: classical # æˆ– ipcidrã€domain
  #   path: # æ–‡ä»¶è·¯å¾„
  #   url: # åªæœ‰å½“ç±»å‹ä¸º HTTP æ—¶æ‰å¯ç”¨ï¼Œæ‚¨ä¸éœ€è¦åœ¨æœ¬åœ°ç©ºé—´ä¸­åˆ›å»ºæ–°æ–‡ä»¶ã€‚
  #   interval: # è‡ªåŠ¨æ›´æ–°é—´éš”ï¼Œä»…åœ¨ç±»å‹ä¸º HTTP æ—¶å¯ç”¨

  Unbreak:
    type: http
    behavior: classical
    path: ./RuleSet/Unbreak.yaml
    url: https://ghproxy.com/https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/Unbreak.yaml
    interval: 86400

  Streaming:
    type: http
    behavior: classical
    path: ./RuleSet/StreamingMedia/Streaming.yaml
    url: https://ghproxy.com/https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/StreamingMedia/Streaming.yaml
    interval: 86400

  StreamingSE:
    type: http
    behavior: classical
    path: ./RuleSet/StreamingMedia/StreamingSE.yaml
    url: https://ghproxy.com/https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/StreamingMedia/StreamingSE.yaml
    interval: 86400

  StreamingCN:
    type: http
    behavior: classical
    path: ./RuleSet/StreamingMedia/StreamingCN.yaml
    url: https://ghproxy.com/https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/StreamingMedia/StreamingCN.yaml
    interval: 86400

  Steam:
    type: http
    behavior: classical
    path: ./RuleSet/Extra/Game/Steam.yaml
    url: https://ghproxy.com/https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/Extra/Game/Steam.yaml
    interval: 86400

  Global:
    type: http
    behavior: classical
    path: ./RuleSet/Global.yaml
    url: https://ghproxy.com/https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/Global.yaml
    interval: 86400

  China:
    type: http
    behavior: classical
    path: ./RuleSet/China.yaml
    url: https://ghproxy.com/https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/China.yaml
    interval: 86400

  ChinaIP:
    type: http
    behavior: ipcidr
    path: ./RuleSet/Extra/ChinaIP.yaml
    url: https://ghproxy.com/https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/cncidr.txt
    interval: 86400
